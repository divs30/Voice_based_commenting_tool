<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Speech<->text </title>
  <link rel="stylesheet" href="styles.css">


</head>
<body  >
    <!-- <div id="dragMe" class="draggable">Drag me</div> -->

    <!-- <div class="container" id="container"> -->
        <div id="dragMe" class="draggable container">

      <div class="texts">
          <button id="recordButton" class="buttons" >Record</button>
          Select Voice: <select id='voiceList'></select> <br><br>

          <input id='txtInput' size="50"> <br><br>    
          <!-- <textarea id='txtInput' row="2" column="30"> <br><br>     -->
          <button id='btnSpeak' class="buttons">Speak!</button>
          <button id="stop" class="buttons">Stop</button>
           <button id="lock" class="buttons">Lock/Edit</button>
      </div>
 
    </div>
 
<script>

const texts = document.querySelector('.texts');

window.SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;

const recognition = new SpeechRecognition();
recognition.interimResults = true;

 recordButton.addEventListener("click", startRecording);

 function startRecording() {
    recognition.addEventListener('result', (e)=>{

        console.log(e);
 
        const text = Array.from(e.results)
            .map(result => result[0])
            .map(result => result.transcript)
            .join('');
        txtInput.value = text;
    });

    recognition.start();
 }
var txtInput = document.querySelector('#txtInput');
var voiceList = document.querySelector('#voiceList');
var btnSpeak = document.querySelector('#btnSpeak');
var stopSpeak=document.querySelector('#stop');
var locks=document.querySelector('#lock');
var synth = window.speechSynthesis;
var voices = [];

PopulateVoices();
if(speechSynthesis !== undefined){
    speechSynthesis.onvoiceschanged = PopulateVoices;
}

btnSpeak.addEventListener('click', (f)=> {
    var toSpeak = new SpeechSynthesisUtterance(txtInput.value);
    var selectedVoiceName = voiceList.selectedOptions[0].getAttribute('data-name');
    voices.forEach((voice)=>{
        if(voice.name === selectedVoiceName){
            toSpeak.voice = voice;
        }
    });
    synth.speak(toSpeak);
});
stopSpeak.addEventListener('click',func);
function func()
{
    synth.cancel();
}

function PopulateVoices(){
    voices = synth.getVoices();
    var selectedIndex = voiceList.selectedIndex < 0 ? 0 : voiceList.selectedIndex;
    voiceList.innerHTML = '';
    voices.forEach((voice)=>{
        var listItem = document.createElement('option');
        listItem.textContent = voice.name;
        listItem.setAttribute('data-lang', voice.lang);
        listItem.setAttribute('data-name', voice.name);
        voiceList.appendChild(listItem);
    });

    voiceList.selectedIndex = selectedIndex;
}

locks.addEventListener('click', ()=>{

   
    if (txtInput.disabled==true){  txtInput.disabled=false;
        txtInput.innerHTML="Lock Text";
    }
    else{  txtInput.disabled=true;
        txtInput.innerHTML="Edit Text"
    }
});


    // The current position of mouse
let x = 0;
let y = 0;

// Query the element
const ele = document.getElementById('dragMe');

// Handle the mousedown event
// that's triggered when user drags the element
const mouseDownHandler = function (e) {
    // Get the current mouse position
    x = e.clientX;
    y = e.clientY;

    // Attach the listeners to `document`
    document.addEventListener('mousemove', mouseMoveHandler);
    document.addEventListener('mouseup', mouseUpHandler);
};

const mouseMoveHandler = function (e) {
    // How far the mouse has been moved
    const dx = e.clientX - x;
    const dy = e.clientY - y;

    // Set the position of element
    ele.style.top = `${ele.offsetTop + dy}px`;
    ele.style.left = `${ele.offsetLeft + dx}px`;

    // Reassign the position of mouse
    x = e.clientX;
    y = e.clientY;
};

const mouseUpHandler = function () {
    // Remove the handlers of `mousemove` and `mouseup`
    document.removeEventListener('mousemove', mouseMoveHandler);
    document.removeEventListener('mouseup', mouseUpHandler);
};

ele.addEventListener('mousedown', mouseDownHandler);









</script>
<embed src="sample.pdf#toolbar=0&navpanes=0&scrollbar=0" type="application/pdf" width="100%" height="1000px" />

</body>
</html>


